-- CONNECT 'jdbc:derby:/home/cgawron/musicDB;create=true';
--DROP TABLE CRAWLER;--DROP TABLE ALBUM;--DROP TABLE TRACK;
CREATE TABLE CRAWLER  (		  PATH VARCHAR(512) NOT NULL PRIMARY KEY, 		  MODIFIED TIMESTAMP NOT NULL , 		  STATE INTEGER NOT NULL ); 
CREATE TABLE ALBUM (		  ALBUMID INTEGER NOT NULL, 		  TITLE VARCHAR(512) NOT NULL);  
CREATE TABLE TRACK  (		  TRACKID INTEGER NOT NULL, 		  ALBUMID INTEGER NOT NULL,		  TRACKNO INTEGER NOT NULL,		  TITLE VARCHAR(512) NOT NULL, 		  PATH VARCHAR(512) NOT NULL, 		  MODIFIED TIMESTAMP NOT NULL ); 		  CREATE TABLE TAGS (		  TRACKID INTEGER NOT NULL,		  TAG VARCHAR(32) NOT NULL,		  TEXT VARCHAR(256) NOT NULL);		 ALTER TABLE ALBUM ADD CONSTRAINT ALBUMID PRIMARY KEY (ALBUMID);ALTER TABLE TRACK ADD CONSTRAINT TRACKID PRIMARY KEY (TRACKID);ALTER TABLE TRACK ADD CONSTRAINT FK_ALBUMID FOREIGN KEY (ALBUMID) REFERENCES ALBUM(ALBUMID) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE TRACK ADD CONSTRAINT PATH UNIQUE (PATH);ALTER TABLE TAGS  ADD CONSTRAINT PK_TAGS PRIMARY KEY (TRACKID, TAG, TEXT);ALTER TABLE TAGS  ADD CONSTRAINT FK_TRACKID FOREIGN KEY (TRACKID) REFERENCES TRACK(TRACKID) ON DELETE RESTRICT ON UPDATE RESTRICT;